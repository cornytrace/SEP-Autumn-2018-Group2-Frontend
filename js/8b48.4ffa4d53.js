(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["8b48"],{"8b48":function(t,s,r){"use strict";r.r(s);var e=function(){var t=this,s=t.$createElement,r=t._self._c||s;return r("div",{staticClass:"app flex-row align-items-center"},[r("div",{staticClass:"container"},[r("b-row",{staticClass:"justify-content-center"},[r("b-col",{attrs:{md:"8"}},[r("b-card-group",[r("b-card",{staticClass:"p-4",attrs:{"no-body":""}},[r("b-card-body",[r("b-form",[r("h1",[t._v("Login")]),r("p",{staticClass:"text-muted"},[t._v("Sign In to your account")]),r("b-input-group",{staticClass:"mb-3"},[r("b-input-group-prepend",[r("b-input-group-text",[r("i",{staticClass:"icon-user"})])],1),r("b-form-input",{staticClass:"form-control",attrs:{type:"text",placeholder:"Email",autocomplete:"username email"},model:{value:t.username,callback:function(s){t.username=s},expression:"username"}})],1),r("b-input-group",{staticClass:"mb-4"},[r("b-input-group-prepend",[r("b-input-group-text",[r("i",{staticClass:"icon-lock"})])],1),r("b-form-input",{staticClass:"form-control",attrs:{type:"password",placeholder:"Password",autocomplete:"current-password"},nativeOn:{keyup:function(s){return"button"in s||!t._k(s.keyCode,"enter",13,s.key,"Enter")?t.doLogin(s):null}},model:{value:t.password,callback:function(s){t.password=s},expression:"password"}})],1),r("b-alert",{attrs:{id:"errorAlert",variant:"danger",dismissible:"",show:t.showAlert},on:{dismissed:function(s){t.showAlert=!1}}},[t._v("\n                  Login failed: "+t._s(t.errorReason)+".\n                ")]),r("b-row",[r("b-col",{attrs:{cols:"6"}},[r("b-button",{staticClass:"px-4",attrs:{variant:"primary",id:"loginbutton"},on:{click:t.doLogin}},[t._v("Login")])],1),r("b-col",{staticClass:"text-right",attrs:{cols:"6"}},[r("b-button",{staticClass:"px-0",attrs:{variant:"link"},on:{click:t.forgotPassword}},[t._v("Forgot password?")])],1)],1)],1)],1)],1)],1)],1)],1)],1)])},o=[],a=r("e0eb"),n={name:"Login",methods:{doLogin:function(){var t=this;if("test"==this.username&&(this.$store.commit("setToken","INVALID_TOKEN"),this.$store.commit("setExpire",Date.now()+36e5),this.$router.push("/")),""==this.username||""==this.password)return this.errorReason="please enter a valid username or password",void(this.showAlert=!0);this.$store.dispatch("login",{username:this.username,password:this.password}).then(function(){a["a"].getUser().then(function(s){t.$store.commit("setUser",s.data),t.$route.query&&void 0!==t.$route.query.redirect?t.$router.push(t.$route.query.redirect):"admin"==t.username?t.$router.push("/admin"):t.$router.push("/")}).catch(function(){t.errorReason="a server error has occurred, please try again",t.showAlert=!0})}).catch(function(s){s.response&&401==s.response.status?(t.errorReason="check username and password",t.showAlert=!0):(t.errorReason="a server error has occurred, please try again",t.showAlert=!0,console.log("login failed!"),console.dir(s))})},forgotPassword:function(){this.$router.push("/pages/forgotpassword")}},data:function(){return{username:"",password:"",showAlert:!1,errorReason:""}}},i=n,u=r("2877"),c=Object(u["a"])(i,e,o,!1,null,null,null);c.options.__file="Login.vue";s["default"]=c.exports}}]);
//# sourceMappingURL=8b48.4ffa4d53.js.map