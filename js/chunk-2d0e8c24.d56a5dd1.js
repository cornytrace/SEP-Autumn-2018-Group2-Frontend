(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e8c24"],{"8b48":function(t,s,e){"use strict";e.r(s);var r=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"app flex-row align-items-center"},[e("div",{staticClass:"container"},[e("b-row",{staticClass:"justify-content-center"},[e("b-col",{attrs:{md:"8"}},[e("b-card-group",[e("b-card",{staticClass:"p-4",attrs:{"no-body":""}},[e("b-card-body",[e("b-form",[e("h1",[t._v("Login")]),e("p",{staticClass:"text-muted"},[t._v("Sign In to your account")]),e("b-input-group",{staticClass:"mb-3"},[e("b-input-group-prepend",[e("b-input-group-text",[e("i",{staticClass:"icon-user"})])],1),e("b-form-input",{staticClass:"form-control",attrs:{type:"text",placeholder:"Email",autocomplete:"username email"},model:{value:t.username,callback:function(s){t.username=s},expression:"username"}})],1),e("b-input-group",{staticClass:"mb-4"},[e("b-input-group-prepend",[e("b-input-group-text",[e("i",{staticClass:"icon-lock"})])],1),e("b-form-input",{staticClass:"form-control",attrs:{type:"password",placeholder:"Password",autocomplete:"current-password"},nativeOn:{keyup:function(s){return"button"in s||!t._k(s.keyCode,"enter",13,s.key,"Enter")?t.doLogin(s):null}},model:{value:t.password,callback:function(s){t.password=s},expression:"password"}})],1),e("b-alert",{attrs:{id:"errorAlert",variant:"danger",dismissible:"",show:t.showAlert},on:{dismissed:function(s){t.showAlert=!1}}},[t._v("\n                  Login failed: "+t._s(t.errorReason)+".\n                ")]),e("b-row",[e("b-col",{attrs:{cols:"6"}},[e("b-button",{staticClass:"px-4",attrs:{variant:"primary",id:"loginbutton"},on:{click:t.doLogin}},[t._v("Login")])],1),e("b-col",{staticClass:"text-right",attrs:{cols:"6"}},[e("b-button",{staticClass:"px-0",attrs:{variant:"link"},on:{click:t.forgotPassword}},[t._v("Forgot password?")])],1)],1)],1)],1)],1)],1)],1)],1)],1)])},o=[],a=e("e0eb"),i={name:"Login",methods:{doLogin(){if("test"==this.username&&(this.$store.commit("setToken","INVALID_TOKEN"),this.$store.commit("setExpire",Date.now()+36e5),this.$router.push("/")),""==this.username||""==this.password)return this.errorReason="please enter a valid username or password",void(this.showAlert=!0);this.$store.dispatch("login",{username:this.username,password:this.password}).then(()=>{a["a"].getUser().then(t=>{this.$store.commit("setUser",t.data),"admin"==t.data.role?this.$router.push("/admin"):this.$route.query&&void 0!==this.$route.query.redirect?this.$router.push(this.$route.query.redirect):this.$router.push("/")}).catch(()=>{this.errorReason="a server error has occurred, please try again",this.showAlert=!0})}).catch(t=>{t.response&&401==t.response.status?(this.errorReason="check username and password",this.showAlert=!0):(this.errorReason="a server error has occurred, please try again",this.showAlert=!0,console.log("login failed!"),console.dir(t))})},forgotPassword(){this.$router.push("/pages/forgotpassword")}},data:function(){return{username:"",password:"",showAlert:!1,errorReason:""}}},n=i,u=e("2877"),c=Object(u["a"])(n,r,o,!1,null,null,null);c.options.__file="Login.vue";s["default"]=c.exports}}]);
//# sourceMappingURL=chunk-2d0e8c24.d56a5dd1.js.map